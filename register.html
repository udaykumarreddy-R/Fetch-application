<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
    <div class="d-flex justify-content-center align-items-center vh-100">
      <form class="bg-light p-5 rounded shadow">
        <h1 class="text-center mb-4">Create Account</h1>
        
        <div class="mb-3">
          <label for="name-value" class="form-label">Username</label>
          <input id="name-value" type="text" class="form-control" placeholder="Enter your name" />
          <span id="name-error" class="error"></span>
        </div>
        
        <div class="mb-3">
          <label for="email-value" class="form-label">Email</label>
          <input id="email-value" type="email" class="form-control" placeholder="Enter your email"/>
          <span id="email-error" class="error"></span>
        </div>
        
        <div class="mb-3">
          <label for="pwd-value" class="form-label">Password</label>
          <input id="pwd-value" type="password" class="form-control" placeholder="Enter your password" />
          <span id="pwd-error" class="error"></span>
        </div>
        
        <div class="mb-3">
          <label for="password-value" class="form-label">Confirm Password</label>
          <input id="password-value" type="password" class="form-control" placeholder="Confirm Password" />
          <span id="confirmPass-error" class="error"></span>
        </div>
        
        <button id="btn" type="submit" class="btn btn-primary w-100">Submit</button>
      </form>
    </div>
    <script>
        const nameVal=document.getElementById('name-value')
        const emailVal=document.getElementById('email-value')
        const passVal=document.getElementById('pwd-value')
        const btn=document.getElementById('btn')
        const nameError=document.getElementById('name-error')
        const emailError=document.getElementById('email-error')
        const passError=document.getElementById('pass-error')
        const confirmPassError=document.getElementById('confirmPass-error')

        const confirmPassVal=document.getElementById('password-value')
        const form=document.querySelector('form')

        function nameInputHandler(){
          const pattern=/^[a-zA-Z]{3,}\s{1}[a-zA-Z]{1,}$/
          const name=nameVal.value;

          if(name.length===0){
              btn.disabled=true
              nameError.textContent="Name is required"
              return false;
          }

          if(!name.match(pattern)){
              btn.disabled=true
              nameError.textContent="FullName is required"
              return false;
          }

          btn.disabled=false;
          nameError.innerHTML = `<ion-icon name="checkmark-circle"></ion-icon>`
          return true;
        }

        nameVal.addEventListener('keyup',nameInputHandler)
        nameVal.addEventListener('blur',nameInputHandler)


        function emailInputHandler(){
          const email=emailVal.value;
          const pattern=/^[a-zA-Z]{2,}[0-9]{3,}\@\w{3,}\.\w{2,3}$/

          if(email.length===0){
            btn.disabled=true;
            emailError.textContent="Email is required"
            return false;
          }

          if(!email.match(pattern)){
            btn.disabled=true;
            emailError.textContent="Valid email is required"
            return false;
          }

          btn.disabled=false;
          emailError.innerHTML = `<ion-icon name="checkmark-circle"></ion-icon>`
          return true;
        }

        emailVal.addEventListener('keyup',emailInputHandler)
        emailVal.addEventListener('blur',emailInputHandler)

        function passwordHandler(){
          var pwd=passVal.value;
          const pattern=/^[A-Z]{1,2}[a-z]{1,3}[\$,\#,\@,\!][0-9]{2,3}$/
          if(pwd.length===0){
            btn.disabled=true;
            passError.textContent="Password is required"
            return false;
          }

          if(!pwd.match(pattern)){
            btn.disabled=true;
            passError.textContent="Valid password is required"
            return false;
          }
          btn.disabled=false;
          passError.innerHTML = `<ion-icon name="checkmark-circle"></ion-icon>`
          return true;

        }

        passVal.addEventListener('keyup',passwordHandler)
        passVal.addEventListener('blur',passwordHandler)

        function confirmPasswordHandler(){
            const confPassword=confirmPassVal.value;
            if(confPassword.length===0){
              btn.disabled=true
              confirmPassError.textContent="Confirm password is required"
              return false
            }
            if(confPassword!==pwd){
              btn.disabled=true
              confirmPassError.textContent="Enter the valid password"
              return false
            }

            btn.disabled=false
            confirmPassError.innerHTML = `<ion-icon name="checkmark-circle"></ion-icon>`
            return true
        }


        confirmPassVal.addEventListener('keyup',confirmPasswordHandler)
        confirmPassVal.addEventListener('blur',confirmPasswordHandler)

        form.addEventListener('submit',(e)=>{
          e.preventDefault()

          if(!nameInputHandler){
            return false
          }
          if(!emailInputHandler){
            return false
          }
          if(!passwordHandler){
            return false
          }
          if(!confirmPasswordHandler){
            return false
          }
        })

    </script>
     <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
     <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
